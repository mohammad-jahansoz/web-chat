<%- include("./includes/head.ejs") %>
<%- include("./includes/header.ejs") %>
<script src="/js/socket.js" defer></script>

<body>
  <div class="messenger">
    <div class="head">
      <a href="/">
        <h1>WebChat</h1>
      </a>
      <span class="profile-chat">
        <img src="<%= friend.imageUrl %>" alt="">
        <h4><%= friend.username %></h4>
      </span>
    </div>
    <ul class="chats" id="messages">
      <% for(const message of chat){ %>
      <li class="<%= (message.userId.toString() === user._id.toString()) ? "me" : "he-she" %>"><%= message.message %></li>
      <% } %>
    </ul>
    <form id="form" class="enter-message">
      <input type="hidden" id="userId" name="userId" value="<%= user._id %>" />
      <input type="hidden" id="chatId" name="chatId" value="<%= chatId %>" />
      <input type="hidden" id="friendId" name="friendId" value="<%= friend._id %>" />
      <input type="text" id="input" autocomplete="off">
      <i class="fa-solid fa-image"></i>
    </form>
  </div>

</body>

<%- include("./includes/footer.ejs") %>